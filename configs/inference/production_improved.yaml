# =============================================================================
# DEPRECATED - Please use production.yaml instead
# =============================================================================
#
# This file is kept for backward compatibility.
# New deployments should use: configs/production.yaml
#
# Redirect configuration
# =============================================================================

_base_: production.yaml

# Note: The new production.yaml has more comprehensive settings and 
# better documentation. Please migrate to that configuration.

dataset:
  subject: subj01
  subject_num: 1
  max_trials: 30000  # All 30K samples
  train_ratio: 0.80  # 24,000 train
  val_ratio: 0.10    # 3,000 val
  test_ratio: 0.10   # 3,000 test
  index_dir: data/indices/nsd_index

preprocessing:
  # CRITICAL: Increased from k=2 to k=100
  # More components = more information retained = better predictions
  reliability_threshold: 0.1
  pca_k: 100  # Was 2 - this is the BIGGEST improvement!
  use_roi: false

mlp:
  # Will automatically adjust input_dim based on pca_k
  hidden_dim: 2048
  dropout: 0.2
  learning_rate: 0.0001
  batch_size: 64
  epochs: 100
  early_stop_patience: 15
  clip_dim: 512

adapter:
  hidden_dim: 1536
  dropout: 0.0
  learning_rate: 0.0003
  batch_size: 256
  epochs: 50
  use_layernorm: true

diffusion:
  model_id: "stabilityai/stable-diffusion-2-1"
  num_inference_steps: 250  # Increased from 150
  guidance_scale: 7.5  # Reduced from 11.0 for more natural images
  scheduler: "dpm"  # Changed from pndm - often better quality
  eta: 0.0
  output_size: 768
  dtype: "float32"

training:
  device: "cuda"
  seed: 42
  num_workers: 4

paths:
  output_dir: "outputs"
  cache_dir: "cache"
  checkpoint_dir: "checkpoints"
  log_dir: "logs"

# Metadata
config_version: "2.0-improved"
description: "Improved configuration with k=100 PCA, 250 steps, DPM scheduler"
created: "2025-11-14"
